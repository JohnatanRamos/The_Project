<!-- Process Section (Dynamic & Interactive) -->
<section id="process" class="py-20">
    <div class="container mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="text-3xl md:text-4xl font-bold animate-on-scroll">Un Proceso <span class="gradient-text">Claro y Efectivo</span></h2>
            <p class="text-lg text-accent mt-2 animate-on-scroll delay-100">Te guiamos en cada paso hacia el éxito digital.</p>
        </div>
        
        <div id="timeline" class="relative max-w-3xl mx-auto">
            <!-- Vertical Line -->
            <div class="absolute left-4 md:left-1/2 -ml-px h-full w-0.5 bg-secondary/50" aria-hidden="true"></div>
            <!-- Animated Progress Line -->
            <div id="timeline-progress" class="absolute left-4 md:left-1/2 -ml-px h-0 w-0.5 bg-primary" aria-hidden="true"></div>

            <!-- Step 1 -->
            <div class="timeline-step relative mb-12">
                <div class="md:flex items-center md:justify-normal md:space-x-8">
                    <div class="flex-shrink-0 w-full md:w-1/2">
                        <div class="flex items-center justify-start space-x-4 md:justify-end md:space-x-0 md:text-right">
                             <div class="md:pr-8 glass-card p-6 timeline-content">
                                <h3 class="font-semibold text-xl text-accent">Análisis y Estrategia</h3>
                                <p class="text-sm text-white/80 mt-1">Entendemos tus objetivos para diseñar una hoja de ruta tecnológica efectiva.</p>
                             </div>
                             <div class="timeline-dot absolute left-4 -ml-5 md:relative md:ml-0 md:order-2 w-10 h-10 rounded-full border-2 border-primary flex items-center justify-center bg-base z-10">
                                <span class="font-bold text-lg">1</span>
                             </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="timeline-step relative mb-12">
                <div class="md:flex items-center md:flex-row-reverse md:space-x-reverse md:space-x-8">
                    <div class="flex-shrink-0 w-full md:w-1/2">
                         <div class="flex items-center justify-start space-x-4 md:space-x-0">
                            <div class="timeline-dot absolute left-4 -ml-5 md:relative md:ml-0 w-10 h-10 rounded-full border-2 border-primary flex items-center justify-center bg-base z-10">
                                <span class="font-bold text-lg">2</span>
                            </div>
                            <div class="md:pl-8 glass-card p-6 timeline-content">
                                <h3 class="font-semibold text-xl text-accent">Diseño y Desarrollo</h3>
                                <p class="text-sm text-white/80 mt-1">Construimos tu solución utilizando metodologías ágiles y las mejores tecnologías.</p>
                            </div>
                         </div>
                    </div>
                </div>
            </div>
            
            <!-- Step 3 -->
            <div class="timeline-step relative mb-12">
                <div class="md:flex items-center md:justify-normal md:space-x-8">
                    <div class="flex-shrink-0 w-full md:w-1/2">
                        <div class="flex items-center justify-start space-x-4 md:justify-end md:space-x-0 md:text-right">
                             <div class="md:pr-8 glass-card p-6 timeline-content">
                                <h3 class="font-semibold text-xl text-accent">Implementación y Despliegue</h3>
                                <p class="text-sm text-white/80 mt-1">Lanzamos tu proyecto a producción con un proceso robusto y sin interrupciones.</p>
                             </div>
                             <div class="timeline-dot absolute left-4 -ml-5 md:relative md:ml-0 md:order-2 w-10 h-10 rounded-full border-2 border-primary flex items-center justify-center bg-base z-10">
                                <span class="font-bold text-lg">3</span>
                             </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4 -->
            <div class="timeline-step relative mb-12">
                <div class="md:flex items-center md:flex-row-reverse md:space-x-reverse md:space-x-8">
                    <div class="flex-shrink-0 w-full md:w-1/2">
                         <div class="flex items-center justify-start space-x-4 md:space-x-0">
                            <div class="timeline-dot absolute left-4 -ml-5 md:relative md:ml-0 w-10 h-10 rounded-full border-2 border-primary flex items-center justify-center bg-base z-10">
                                <span class="font-bold text-lg">4</span>
                            </div>
                            <div class="md:pl-8 glass-card p-6 timeline-content">
                                <h3 class="font-semibold text-xl text-accent">Soporte y Crecimiento</h3>
                                <p class="text-sm text-white/80 mt-1">Te acompañamos después del lanzamiento para asegurar tu éxito continuo.</p>
                            </div>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const timeline = document.getElementById('timeline');
    if (timeline) {
        const timelineSteps = document.querySelectorAll('.timeline-step');
        const timelineProgress = document.getElementById('timeline-progress');
        
        if (timelineProgress) {
            const timelineObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Set active step
                        timelineSteps.forEach(step => step.classList.remove('is-active'));
                        entry.target.classList.add('is-active');

                        // Update progress bar height
                        const dot = entry.target.querySelector('.timeline-dot') as HTMLElement;
                        if (dot) {
                            const timelineTop = timeline.getBoundingClientRect().top;
                            const dotTop = dot.getBoundingClientRect().top;
                            const newHeight = dotTop - timelineTop + (dot.offsetHeight / 2);
                            timelineProgress.style.height = `${newHeight}px`;
                        }
                    }
                });
            }, {
                rootMargin: '-50% 0px -50% 0px', // Activate when step is in the vertical center
                threshold: 0
            });

            timelineSteps.forEach(step => timelineObserver.observe(step));
        }
    }
  });
</script>
